require 'pry'

array = %w[
2423421124223215156763444826821526683148265348267776431415488315487514158571231526761415488
4214132414413137265248672448378215156658858675832121323342263763377843152672376877332448158115375
3413124122442148155137375614151583377581122637642626853437834837775866221142481564482688331526732637
123134434443123726612615553215376773243715814826567621321548624848673337267754443715888681224237486
312313143241411515533715782148485448268652333715721537672415268237265668312337377326762337487348487653222615
231122312113143715813748551115155148265573433726723715683315157575433126375248266723482673
441233133321424815621548685674144448158437158884133748731526753415378785887542324122373763371576
4233242314412126375642263763481578514448378337266814261581152655584423262673267611265126558413373773262675
333133312444321561373757111526541548858334374884371587781441155137155833377137155783423748643737882348157
3413423244332226266248486611263754152685744115375842262661484858873144374884488841153751264858541126551
1333121341144415822648681448488115155585587565313242442237376621264856843437158415488714262682371565683133
143442221434134815733748754415158148265881133715712655578122413715513715561148375448488562241
21213332412421482652372666422637624868865411141548814837651348377237486554121515632648751348157237
4144123324111348487448852226486137155653144815832615752415832626767586422231483754153787234837766662
322232111432312637522626671437158448268562424837686781312115155426378611263752483765622326377448378613377248
33312242134441373754261588224826834826768213482671374855222615621548666875686414444241153754373788431515711
234442114333243737823737661237486337487573323737623767132648734848757621242648843748862415378115
234142314141111537542648852315487326487658411148514826551426488551244848822648663426158315267758534133262
414442122433113726524837654115485137375877833121481554152686332648775422481566141526858743243748843726861
311424241421333748711548573148375226376751111526555685231212484862372665241526814826566132
213124121341441537843748883348267215266752223726611515566613231537731576433715733715787212262662152
1322322133221448488315753215156764334848713715573326267315158786423448268226486764241526841
14232143143323484873262676141537842615857784341448158126485541374853371578873121152672482666543326377
43314121444423374871152656243726824826668443261571154858131548713726558842112637552348487126265663314815571
3421432214423415378348487711154853481575642237486337267631265126375788431437268415488574113715632
232121233331211526521515665221483752372666677734132415268437156673222615631515767544423748614826582115485126
31431244411132374861371557552331153752151567433748741526887333261577765311111515511555314837533
344333122434423748624826688112151561482655312637575783411448158426488513262672263765531415378437851
2223233332431148155115375511263753151575781222373763261576311515543726876231153754372687442684
1422423241424437268226486811154852482665632237486137375614262684263785781231482654373787131537721548656
3342313122112237486237486622484866554121371553261576113715543748855864341137375226486524373
221314244343413715511526584115375215486873341581482657784212262664154885624148155215156831481557685811442
212344211211441526843726882348157415265653231526734826763348711515577542113737511526551426
114433344232442626824848681137485148485561442648814826582448378115375657688113312448488337
1241122211411248156415488542261562371568534115485315157878314115155337487844264882153768524437378326
132442343444243726863226266326157762344848811515571337267437268568811124373781371556133715
33244423112424153784482686134826724837658612422626622637681326487215486565511213371573484875221515614826
212314241221411526531537785224261581261556132648743715856612432626711548584237266215266864243
14212444142131155115265743481573371578522315267448267632481562373767668332134826756212261564374
222443132334222615641537863126541526878221372652264866241537821548866734142615833748754148265137
432242232214431537713748581337157126265571242637814848565543342648811548571226156137265571324837
14242331231422151566334815734848778142152663262668134848744826855511441526885224372686423715643748886572
333243211412431537733726783215376237376765442448265115155621153756831315267226376578853213
3111414314411426158551313748513748575885785842242422314848513715571137485315267566332348377
3314414121311326377337267541151552151568574332374861483757333715734837775113373775142626833715755853242348157
2143412224132348487348377623154873481576741415268415488585844122373766124826622648655144481582154868
13431432144141262652153768313748523726675311372652151555142626811548557885114141372653261578531348157237
342124421431143748851437268337267557142426158126155632376448268784233748723726661126485437378585853
2113412144244226486415158831375126375786423248156326487733374874481587688811431448488326377513482671153
3221223442224248376348157813371572154865661334372684484887341548877333261574154887414826511526587
34343333222114373783373775433737731537785221154856661331261552482667723426488115375712264865656
42131322414131264852486722152661265654141537811526552448158226376688884323423737623715683126155248486774344
234124214132424864372688313748522648676333264871152657411558772133261573373777332637721526675654313315377
33121123331142152662483768244815822626665434378215376731371552151567851313482674261575413737544
1414312411434437488215156813264875712248156126155658312337267148265632262663262677575581423
213331423334143785434815741537888223151571154856222626612626566777111311483753373755233748
2411214232441315377512482653261575881224152684378665641323154874264886224815667587685634341
121131333223142626843748857211484851154855434848734848786631123748622615654426268126155853421537687762144
13143413334144262678232648732637765841414826512626583137485753342615811548577871444437378215376822152661
424114333443134826753426268426488773232615723726662137155678234215486823152671153756711326157
241332121243422664373788312626521548667224153784153786681111483752483765311526575342486115485812264
42212221133411375326267522482661261556842437378437158687414348487315267812371561153755587331233773482
122344441131412637543726885712243715851226376448158563331537772415488348487675542334151584373787762334153784
32331433341223371573373776613426268148265722262663482676558777857734243232421326742637853148375148485
433124333343331526732615773115511537577331152652374867141548812626557877423134152681372657
31412112333132151564158721261574484886523248266448873326487148155767743322372666714448158813261574482685
42333231441134482683267743372674372688522126155148485622261561263756652431152654158781233737763415378115155
214213432234323726632648772415488226266681423748613715584237376315157857114448268148375821481552373
22433442444413374874372685111526522648658412482661264855314848578821331573482677212626523726665312371562483
33341321213422374861151556124848613726558711344815822667241583483776555643133115155448877213263772
14431133143324373784481586331526744837877144374884158834154881263757574231264854482687243715843786688
342243231434414854373788824437158137375867442137266115265634264881155783431548713748583415
231144343232121548611515553148155771221548623715662137265326157657124215486126265822263763152
24242442124323154871371556433748712615587144483782373768222615665864131315377426378512154861155572132
242421114113312626577422262663153778141526822626658531211548541515864237156126155854434815781248266326
334342323214123715632648751348758113373771263755554221373754152686232637731537766312154865141526844815857867
111312314342233748743715863126485237266768141226486511482655834326267148155833371571152657757832
4311214441413326487348267732263762263767582442374861154858411548523715688143482661372658314854263787565324421
434334443114121515651415378348157585412126155337267633377437268751431548582437158658514112151561
1423141424421148265348267541482661373758622326377315267668824314262683373775741215266426488523484874373
1334413442424148485415488842154861262658682334154884154887714337157843373774373788566122232
12244122412312152661482655444826513726587232262667665242213737543748866123374871372656112615513737555822
43414313213222152663372676224826834826766756432342372663481578412648534837787314153783483775
444243143113134848733748753126265126265772431537744837883126485215266785433348487348377731
424411344241243715844848665422374862483766423748614837588861414226486215376814481583487553213726
42234212222312154865422626632637787614214848568133153774261587556663413314481584153785342648877722
432221133231123715624815655212263764372685124826633737756723211526561148375315157574431537722648
1411422311131115485533374871484857741115265585123148265126485721262651482656644448378821262652374868855124
21114243212314482681153755222615624837665641343783262677333748724826675443371573153778134837733726
311423244423421537613737587424263781374856231537744837858624223761372656868423333726771326377148
22421111322213483773371575241537834876631448378115485512264864154885761412263764151585834215
244423243211312626534877551431261552371567223726632648768431481554262687212626533715768561
414344212243224815643737862215376448488678631122482661483758341526842626875242153763262678424815612626
4212442332444348157248156824373782373766823215376712263765686776883412411313262675312615533737777
213331143432443737884426378448378862433715786721422664482688212615544837865342372668111548522637
324221131224214837544837863415488437268782233748712648562137155126155666652213322648624837672248
11142244332221263754374886633248266437378713484873151575762244261583482678411515541526886331261
243422244323413751262658232615767423371572484866862114263784371585144815855124481581153758567321314815541
31242333423213481571483757231515724848666743334826723726671326157237156574131515744848853337377
3342241312311226486237486553313737544815877722324848623737674326267126155864421526631548783437267115155786
4134212322434326377248687812141526822648654348267863211515523766243748843786756612333126375215376724
2442323322322215486215266611374852154865644115265812482663154875871242373768313748532626776232482662486765667
]

def checker(array)
  missing = []
  array.each do |line|
    expected = []
    line.chars.each do |digit|
      if digit.to_i < 5
        expected << digit.to_i
      elsif (digit.to_i - 4) == expected.last
        expected.pop
      else
        expected = []
        break
      end
    end
    missing << expected
  end
  # scores = [3, 57, 1197, 25_137]
  missing.map! do |string|
    score = 0
    string.each { |corr| score = score * 5 + (corr % 5) }
    score
  end
  missing = missing.reject(&:zero?)
  p missing.sort.length
  missing.sort[(missing.length / 2)]
end

p checker(array)
